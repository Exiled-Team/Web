"use strict";(self.webpackChunkexiled_docs=self.webpackChunkexiled_docs||[]).push([[286],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var a=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return t?a.createElement(g,o(o({ref:n},c),{},{components:t})):a.createElement(g,o({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7166:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var a=t(7462),r=t(3366),i=(t(7294),t(3905)),o=["components"],s={sidebar_position:3},l=void 0,p={unversionedId:"Plugins/Events",id:"Plugins/Events",title:"Events",description:"This tutorial assumes that you are familiar with C# and with setting up a plugin in the EXILED framework. See the tutorial if you are unfamiliar with setting up a plugin using EXILED.",source:"@site/docs/Plugins/Events.md",sourceDirName:"Plugins",slug:"/Plugins/Events",permalink:"/Web/docs/Plugins/Events",draft:!1,editUrl:"https://github.com/Exiled-Team/Web/tree/main/docs/docs/Plugins/Events.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"MoreEffectiveCoroutines",permalink:"/Web/docs/Plugins/MoreEffectiveCoroutines"},next:{title:"Contributing to EXILED",permalink:"/Web/docs/Contributing/Intro"}},c={},u=[{value:"Event structure",id:"event-structure",level:2},{value:"Example: Enraging event",id:"example-enraging-event",level:3},{value:"Connecting events",id:"connecting-events",level:2}],d={toc:u};function m(e){var n=e.components,t=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This tutorial assumes that you are familiar with C# and with setting up a plugin in the EXILED framework. See the tutorial if you are unfamiliar with setting up a plugin using EXILED."))),(0,i.kt)("h1",{id:"events-what-are-they"},"Events: What are they?"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Events")," play a key role in the EXILED framework and all of the plugins utilizing it. Almost every plugin created using the EXILED framework uses events in one way or another. So, what are they? An event is a simple way of being informed when ",(0,i.kt)("em",{parentName:"p"},"something")," happens. Events range from the round ending, to a player throwing an item or opening a door, to even SCP-096 being enraged! Events allow you to attach code that executes when something occurs before, during, or at the conclusion of a round."),(0,i.kt)("p",null,"For example, say that you have the following method."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},"public void OnDead()\n{\n    // Show hint to player.\n}\n")),(0,i.kt)("p",null,"With EXILED, it is possible to achieve the desired result: Showing a hint to a player who dies."),(0,i.kt)("h2",{id:"event-structure"},"Event structure"),(0,i.kt)("p",null,"The EXILED framework consists of two different types of events: Events that can be disallowed, and those that cannot. Events that can be disallowed can prevent certain events from happening; as an example, preventing a player from dying when they normally should. The ability to prevent certain events from happening is what gives EXILED its beauty."),(0,i.kt)("p",null,"All events are part of a static class called a ",(0,i.kt)("strong",{parentName:"p"},"handler"),". All handlers can be found in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Exiled.Events")," namespace. Every handler is related to a specific feature in the game (eg. ",(0,i.kt)("inlineCode",{parentName:"p"},"Exiled.Events.Scp096")," contains SCP-096 related events)."),(0,i.kt)("p",null,"Almost all events have a corresponding ",(0,i.kt)("strong",{parentName:"p"},"event argument")," class. The event argument provides the data of an event, as well as the ability to prevent it from occurring. All event arguments can be found in the ",(0,i.kt)("inlineCode",{parentName:"p"},"Exiled.Events.EventArgs")," namespace, and all event arguments inherit from ",(0,i.kt)("inlineCode",{parentName:"p"},"System.EventArgs"),"."),(0,i.kt)("h3",{id:"example-enraging-event"},"Example: Enraging event"),(0,i.kt)("p",null,"The following is the structure of the ",(0,i.kt)("inlineCode",{parentName:"p"},"Exiled.Events.EventArgs.EnragingEventArgs"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},"public class EnragingEventArgs : System.EventArgs\n{\n    // Note: Constructor omitted.\n    public Scp096 Scp096 { get; } // The SCP-096 instance.\n    public Player Player { get; } // The player controlling SCP-096.\n    public bool IsAllowed { get; set; } // Whether or not SCP-096 can be enraged.\n}\n")),(0,i.kt)("p",null,"Notice the ",(0,i.kt)("inlineCode",{parentName:"p"},"IsAllowed")," property of the event. This property, which defaults to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),", can be set to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," to prevent SCP-096 from being enraged. For most events that can be disallowed, ",(0,i.kt)("inlineCode",{parentName:"p"},"IsAllowed")," is set to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," by default, and plugins can set it to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," to prevent the event from occurring. However, in some cases, ",(0,i.kt)("inlineCode",{parentName:"p"},"IsAllowed")," defaults to false and plugins can set it to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," to ",(0,i.kt)("em",{parentName:"p"},"allow")," the event to occur. An example of this behavior is the ",(0,i.kt)("inlineCode",{parentName:"p"},"InteractingDoor")," event. ",(0,i.kt)("inlineCode",{parentName:"p"},"IsAllowed")," will default to ",(0,i.kt)("inlineCode",{parentName:"p"},"false")," in this event if a player cannot open a door, however plugins may set it to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," to allow the player to open it regardless."),(0,i.kt)("h2",{id:"connecting-events"},"Connecting events"),(0,i.kt)("p",null,"Events can be connected and disconnected by using the ",(0,i.kt)("inlineCode",{parentName:"p"},"+=")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"-=")," operators. These can be used in the plugin's ",(0,i.kt)("inlineCode",{parentName:"p"},"OnEnabled")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"OnDisabled")," methods, respectively."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-cs"},'// Base plugin class\n// This example assumes a method called "OnEnraging" exists in this class. For best practice, you should create a new class to handle events.\nusing Exiled.Events;\npublic override void OnEnabled()\n{\n    Scp096.Enraging += OnEnraging; // Scp096 is the event handler, while Enraging is the name of the event. The += operator connects this event to the provided method.\n}\npublic override void OnDisabled()\n{\n    Scp096.Enraging -= OnEnraging; // The -= operator disconnects this event from the provided method.\n}\n// Some other class\nusing Exiled.Events.EventArgs;\npublic void OnEnraging(EnragingEventArgs ev) // ev is the arguments for the event. Every event has a different argument class with different parameters, so make sure to check its documentation.\n{\n    Log.Info(ev.Player.Nickname + " has just been enraged!");\n}\n')))}m.isMDXComponent=!0}}]);