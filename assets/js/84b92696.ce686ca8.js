"use strict";(self.webpackChunkexiled_docs=self.webpackChunkexiled_docs||[]).push([[418],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return f}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),f=i,m=d["".concat(s,".").concat(f)]||d[f]||p[f]||o;return n?r.createElement(m,a(a({ref:t},c),{},{components:n})):r.createElement(m,a({ref:t},c))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3768:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return f},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var r=n(7462),i=n(3366),o=(n(7294),n(3905)),a=["components"],l={sidebar_position:2},s=void 0,u={unversionedId:"Plugins/MoreEffectiveCoroutines",id:"Plugins/MoreEffectiveCoroutines",title:"MoreEffectiveCoroutines",description:"This tutorial assumes that you are familiar with C# and with setting up a plugin in the EXILED framework. See the Plugin Structure tutorial if you are unfamiliar with setting up a plugin using EXILED.",source:"@site/docs/Plugins/MoreEffectiveCoroutines.md",sourceDirName:"Plugins",slug:"/Plugins/MoreEffectiveCoroutines",permalink:"/Web/docs/Plugins/MoreEffectiveCoroutines",draft:!1,editUrl:"https://github.com/Exiled-Team/Web/tree/main/docs/docs/Plugins/MoreEffectiveCoroutines.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Plugin Structure",permalink:"/Web/docs/Plugins/Plugin Structure"},next:{title:"Events",permalink:"/Web/docs/Plugins/Events"}},c={},p=[{value:"Setup",id:"setup",level:2},{value:"Coroutine",id:"coroutine",level:2},{value:"Delayed Calls",id:"delayed-calls",level:2}],d={toc:p};function f(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This tutorial assumes that you are familiar with C# and with setting up a plugin in the EXILED framework. See the ",(0,o.kt)("a",{parentName:"p",href:"/docs/plugins/Plugin%20Structure"},"Plugin Structure")," tutorial if you are unfamiliar with setting up a plugin using ",(0,o.kt)("strong",{parentName:"p"},"EXILED"),"."))),(0,o.kt)("h1",{id:"mec-more-effective-coroutines"},"MEC (More Effective Coroutines)"),(0,o.kt)("p",null,"If you are unfamiliar with MEC, this will be a very brief and simple primer to get you started. ",(0,o.kt)("strong",{parentName:"p"},"MEC Coroutines")," are basically timed methods, that support waiting periods of time before continuing execution, without interrupting/sleeping the main game thread. MEC coroutines are safe to use with Unity, unlike traditional threading, which ",(0,o.kt)("em",{parentName:"p"},"will")," crash the server."),(0,o.kt)("p",null,"MEC is useful for plugins which require a pre-defined timeout between execution. As an example, an automatic nuke plugin would want to pause for a certain amount of seconds before activating the warhead. A supply drop plugin would want to wait in certain intervals before executing a supply drop. Both of these are possible with MEC."),(0,o.kt)("h2",{id:"setup"},"Setup"),(0,o.kt)("p",null,"Unlike other API provided by SCP:SL, MEC requires a reference to the ",(0,o.kt)("inlineCode",{parentName:"p"},"Assembly-CSharp-firstpass")," DLL file. After referencing this file, a ",(0,o.kt)("inlineCode",{parentName:"p"},"using MEC;")," statement allows MEC to be used."),(0,o.kt)("h2",{id:"coroutine"},"Coroutine"),(0,o.kt)("p",null,"MEC offers ",(0,o.kt)("a",{parentName:"p",href:"http://trinary.tech/category/mec/free/"},"tons of features")," for controlling threads. For this tutorial, we are going to look at two of them: coroutines, and delayed calls. A coroutine is a method that is executed by MEC and supports delays. These methods must return type ",(0,o.kt)("inlineCode",{parentName:"p"},"IEnumerator<float>")," and must be called by ",(0,o.kt)("inlineCode",{parentName:"p"},"Timing.RunCoroutine(Method())"),". An example can be seen below, using an infinite loop with a 5 second delay."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'using MEC;\nusing Exiled.API.Features;\npublic void SomeMethod()\n{\n    Timing.RunCoroutine(MyCoroutine());\n}\npublic IEnumerator<float> MyCoroutine()\n{\n    for (;;) //repeat the loop infinitely\n    {\n        Log.Info("Hey, I\'m a infinite loop!"); //Call Log.Info to print a line to the game console/server logs.\n        yield return Timing.WaitForSeconds(5f); //Tells the coroutine to wait 5 seconds before continuing. Since this is at the end of the loop, it effectively stalls the loop from repeating for 5 seconds.\n    }\n}\n')),(0,o.kt)("p",null,'This example prints, "Hey, I\'m an infinite loop!" every 5 seconds infinitely. Coroutines can have multiple ',(0,o.kt)("inlineCode",{parentName:"p"},"yield return")," statements."),(0,o.kt)("h2",{id:"delayed-calls"},"Delayed Calls"),(0,o.kt)("p",null,"A simpler method of running an action after a delay is using ",(0,o.kt)("inlineCode",{parentName:"p"},"Timing.CallDelayed(float, Action)"),", which executes code after a given number of seconds passes. This method does not require a coroutine to be created, hence why it's useful. An example can be seen below, logging a message 5 seconds after the method is called."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cs"},'using MEC;\nusing Exiled.API.Features;\npublic void SomeMethod()\n{\n    Timing.CallDelayed(5f, () => // Execute the provided method 5 seconds late.\n    {\n        Log.Info("This log was printed 5 seconds late!");\n    })\n}\n')),(0,o.kt)("p",null,"It is ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"strongly"))," recommended that you do some googling, or ask around ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("a",{parentName:"strong",href:"https://discord.gg/PyUkWTg"},"in the EXILED Discord server"))," if you are unfamiliar with MEC and would like to learn more, get advice, or need help. Questions, no matter how 'stupid' they are, will always be answered as helpfully and clearly as possible for plugin developers to excel. Better code is better for everyone."))}f.isMDXComponent=!0}}]);